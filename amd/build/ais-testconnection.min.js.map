{"version":3,"file":"ais-testconnection.min.js","sources":["../src/ais-testconnection.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Simple ajax to test connection\n *\n * @module     local_solsits/ais-testconnection\n * @author     Mark Sharp <mark.sharp@solent.ac.uk>\n * @copyright  2023 Solent University {@link https://www.solent.ac.uk}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\nimport Prefetch from 'core/prefetch';\nimport Notification from 'core/notification';\n\nexport const init = () => {\n    Prefetch.prefetchStrings('local_solsits', ['success', 'failure']);\n    document.addEventListener('click', e => {\n        if (e.target.id == 'ais_testconnection') {\n            e.preventDefault();\n            e.target.disable = true;\n            const resultdiv = document.querySelector('#ais_testconnection_response');\n            Ajax.call([{\n                methodname: 'local_solsits_ais_testconnection',\n                'args': {'something': 'interesting'}\n            }])[0].done(function(data) {\n                if (data.result == 200) {\n                    e.target.disable = false;\n                    resultdiv.innerHTML = '<i class=\"fa fa-solid fa-check-circle\" style=\"color: var(--success)\"></i> Success';\n                } else {\n                    e.target.disable = false;\n                    resultdiv.innerHTML = '<i class=\"fa fa-solid fa-times-circle\" style=\"color: var(--danger)\"></i> Failure: '\n                        + data.result;\n                }\n            }).fail(Notification.exception);\n        }\n    });\n};\n"],"names":["prefetchStrings","document","addEventListener","e","target","id","preventDefault","disable","resultdiv","querySelector","call","methodname","done","data","result","innerHTML","fail","Notification","exception"],"mappings":";;;;;;;;oOA4BoB,uBACPA,gBAAgB,gBAAiB,CAAC,UAAW,YACtDC,SAASC,iBAAiB,SAASC,OACZ,sBAAfA,EAAEC,OAAOC,GAA4B,CACrCF,EAAEG,iBACFH,EAAEC,OAAOG,SAAU,QACbC,UAAYP,SAASQ,cAAc,8CACpCC,KAAK,CAAC,CACPC,WAAY,wCACJ,WAAc,kBACtB,GAAGC,MAAK,SAASC,MACE,KAAfA,KAAKC,QACLX,EAAEC,OAAOG,SAAU,EACnBC,UAAUO,UAAY,sFAEtBZ,EAAEC,OAAOG,SAAU,EACnBC,UAAUO,UAAY,qFAChBF,KAAKC,WAEhBE,KAAKC,sBAAaC"}